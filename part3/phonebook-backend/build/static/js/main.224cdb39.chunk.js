(this["webpackJsonppart2-notes"]=this["webpackJsonppart2-notes"]||[]).push([[0],{15:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var r=t(0),c=t(16),u=t.n(c),a=t(6),o=t(3),s=t(2),i=t(4),d=t.n(i),b="/api/persons",j={getAllPersons:function(){return d.a.get(b).then((function(e){return e.data}))},addPerson:function(e){return d.a.post(b,e).then((function(e){return e.data}))},deletePerson:function(e){return d.a.delete("".concat(b,"/").concat(e)),e},updateNumber:function(e){return d.a.put("".concat(b,"/").concat(e.id),e).then((function(e){return e.data}))}},l=(t(15),function(e){var n=e.evHandler;return Object(r.jsxs)("p",{children:["Search: ",Object(r.jsx)("input",{onChange:n})]})}),f=function(e){return Object(r.jsxs)("form",{children:[Object(r.jsxs)("div",{children:["name: ",Object(r.jsx)("input",{value:e.newName,onChange:e.newNameInput})]}),Object(r.jsxs)("div",{children:["number: ",Object(r.jsx)("input",{value:e.newNumber,onChange:e.newNumberInput})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",onClick:e.addPerson,children:"add"})})]})},m=function(e){var n=e.personsToShow,t=e.buttonHandler;return n.map((function(e){return Object(r.jsxs)("p",{children:[e.name," - ",e.number," ",Object(r.jsx)("button",{onClick:t(e),children:"delete"})]},e.name)}))},h=function(e){var n=e.message,t=e.succesful;return""===n?null:t?Object(r.jsxs)("div",{className:"succesful",children:["Added ",n]}):Object(r.jsxs)("div",{className:"error",children:["Information of ",n," has already been removed from server"]})},O=function(){var e=Object(s.useState)([]),n=Object(o.a)(e,2),t=n[0],c=n[1],u=Object(s.useState)(""),i=Object(o.a)(u,2),d=i[0],b=i[1],O=Object(s.useState)(""),p=Object(o.a)(O,2),v=p[0],w=p[1],x=Object(s.useState)(""),N=Object(o.a)(x,2),g=N[0],P=N[1],S=Object(s.useState)([""]),k=Object(o.a)(S,2),C=k[0],I=k[1];Object(s.useEffect)((function(){j.getAllPersons().then((function(e){c(e)}))}),[]);var y=""===g?t:t.filter((function(e){return e.name.toLowerCase().includes(g.toLowerCase())}));return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(l,{evHandler:function(e){P(e.target.value)}}),Object(r.jsx)("h2",{children:"Add new person"}),Object(r.jsx)(h,{message:C[0],succesful:C[1]}),Object(r.jsx)(f,{newName:d,newNameInput:function(e){b(e.target.value)},newNumber:v,newNumberInput:function(e){w(e.target.value)},addPerson:function(e){e.preventDefault();var n=t.find((function(e){return e.name===d}));if(void 0!==n)n.number===Number(v)?window.alert("".concat(d," is already added to phonebook")):window.confirm("".concat(n.name," is already added to phonebook, replace the old number with a new one?"))&&j.updateNumber(Object(a.a)(Object(a.a)({},n),{},{number:v})).then((function(e){c(t.map((function(n){return n.id===e.id?e:n}))),I([e.name,!0]),setTimeout((function(){return I([""])}),3e3)})).catch((function(e){I([n.name,!1]),setTimeout((function(){return I([""])}),3e3)}));else{var r={name:d,number:v};j.addPerson(r).then((function(e){c(t.concat(e)),b(""),w(""),I([e.name,!0]),setTimeout((function(){return I([""])}),3e3)}))}}}),Object(r.jsx)("h2",{children:"Numbers"}),Object(r.jsx)(m,{personsToShow:y,buttonHandler:function(e){return function(){if(window.confirm("delete ".concat(e.name))){j.deletePerson(e.id);var n=t.filter((function(n){return n.id!==e.id}));c(n)}}}})]})};u.a.render(Object(r.jsx)(O,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.224cdb39.chunk.js.map